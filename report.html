<!doctype html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8">
  <title>Spindrift</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
</head>
<body>

<div class="container">
  <div class="box">
    <div class="header">Current Report</div>
    <img src="img/current.png" />
    <div class="header">Forecast</div>
    <img src="img/weekForecast.png" />
    <img src="img/forecast.png" />
    <div class="layered-image">
      <img class="image-base"    src="img/wind.png" />
      <img class="image-overlay" src="img/temp.png" />
      <img class="image-overlay" src="img/rain.png" />
    </div>
  </div>
  <div class="box">
     <div id="header-1" class="header"></div>
     <video id="video-1"></video>
     <div id="header-2" class="header"></div>
     <video id="video-2"></video>
  </div>
</div>

<!-- https://github.com/video-dev/hls.js#getting-started -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="config/streams.js"></script>
<script>
  for (let i = 0; i < streams.length; i++) {
    let stream = streams[i];
    if (stream["id"] == "0")
      continue;
    let video = document.getElementById("video-" + stream["id"]);
    document.getElementById("header-" + stream["id"]).innerHTML = stream["title"] + " (" + stream["source"] + ")";
    let hls = new Hls();
    hls.loadSource(stream["url"]);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED, function() {
      video.muted = true;
      video.play();
    });
  }
</script>

</body>
</html>
